---
category: perl
layout: post
tags: []
title: Template Toolkit 入门
---
{% include JB/setup %}

<h4>PRE/POST_CHOMP</h4>我在 <a href='Template_Configuration.html'>Template Toolkit 的配置选项</a> 写过可以设置 POST_CHOMP 和 PRE_CHOMP 为 1 来去掉 <a href="http://www.template-toolkit.org">TT</a> 代码所带来的前后空行。不过如果你不想设置这个的话也是可以去掉前后空行的。比如这样：<br /><pre>Hello [% a = 3 %]<br />World [% a %]</pre>这个输出的话为“Hello \nWorld 3\n”。而这么写可以把里面的 \n 去掉：<br /><pre>Hello [% a = 3 -%]<br />World [% a -%]</pre>输出为“Hello World 3”。这个在 <a href="http://www.stonehenge.com/merlyn/LinuxMag/col60.html">http://www.stonehenge.com/merlyn/LinuxMag/col60.html</a> 里提到过。<h4>合并两个 TT 代码</h4><pre>[% user.name %][% END %]</pre>可以写成<br /><pre>[% user.name; END %]</pre><h4>INSERT 和 INCLUDE 的区别</h4>INSERT 只是插入文件的内容而不管你是不是另一个 .tt 文件。而 INCLUDE 的话如果是另一个 .tt 文件的话会执行它。<br />比如你有一个文件叫 footer.tt, 内容为：<br /><pre>Copyright 2004-2005 All Rights Reserved. Powered by &lt;a href="Eplanet.html">Eplanet&lt;/a> &amp;&amp; &lt;a href='http://catalyst.perl.org'><a href="http://dev.catalyst.perl.org">Catalyst</a>&lt;/a> [% CatalystVersion %].</pre>当在另一个文件中调用 [% INSERT footer.tt %] 时输出的结果跟上面的会一样。里面的 [% CatalystVersion %] 是原封不动。而如果是用 [% INCLUDE footer.tt %] 的话里面的 [% CatalystVersion %] 会被执行为这个变量的值。<h4>BLOCK</h4>比如你有段代码要执行两次。比如我有一个导航栏，需要上面放一个下面放一个。那我可以这么写：<br /><pre>[% show_guidebar = BLOCK %]<br />&lt;p><br />[% IF prev_topic %]&lt;&lt;Previous: &lt;a href="[% prev_topic.cms_file %].html">[% prev_topic.cms_title %]&lt;/a>[% END %]<br />[% IF prev_topic and next_topic %]  [% END %]<br />[% IF next_topic %]>>Next: &lt;a href="[% next_topic.cms_file %].html">[% next_topic.cms_title %]&lt;/a>[% END %]<br />&lt;/p><br />[% END %]<p />[% show_guidebar %]<p />...<p />[% show_guidebar %]</pre><h4>注释</h4>注释很简单，在 [% 后加上 # 那这一行就被注释掉了。唯一值得注意的是下面这两种是不一样的：<br /><pre>[%# a = 77<br />   b = 88<br />%]<br />a: [% a %] b: [% b %]</pre>输出 a: b:<br />而[% 和 # 中间空了一格后就只有注释一行而不是整个 [% %], 如：<br /><pre>[% # a = 77<br />   b = 88<br />%]<br />a: [% a %] b: [% b %]</pre>输出 a: b: 88<h3>参考</h3><ul><li><a href='http://www.stonehenge.com/merlyn/LinuxMag/col60.html'>Introduction to Template Toolkit (part 1)</a></li><li><a href='http://www.stonehenge.com/merlyn/LinuxMag/col61.html'>Introduction to Template Toolkit (part 2)</a></li><li><a href='http://www.stonehenge.com/merlyn/LinuxMag/col62.html'>Introduction to Template Toolkit (part 3)</a></li></ul>