---
category: perl
layout: post
tags:
  - DayDayUp
  - Mojo
title: 'Learn Mojo 1: start a project and a bit more'
---
{% include JB/setup %}

<a href="http://search.cpan.org/dist/Mojo/">Mojo</a> is created by <a href="http://search.cpan.org/~sri/">sri</a>, the one who created Catalyst.<br />since sri is very SMART, we should follow him a bit.<br /><br />Mojo is not a web framework. it is "a collection of libraries and example web frameworks for web framework developers.". u can treat it as something like Catalyst::Engine or HTTP::Engine.<br /><br />but Mojolicious is a web framework built on Mojo.<br /><br />install Mojo should be very simple and it doesn't have the half of CPAN. :)<br /><br />start a project based on Mojolicous, you just type:<br />mojolicious generate app DayDayUp<br />cd day_day_up<br />perl bin/day_day_up deamon<br />then you can view a sample through http://127.0.0.1:3000/<br /><br />it's like Catalyst but it's really much more faster than catalyst server.pl<br /><br />Mojolicous is still in its early stage. but luckily, we have MojoX::Renderer::TT by ask.<br /><br />something inside:<br />1, in Controller $c, it is an instance of DayDayUp::Context which based on Mojolicious::Context.<br />check <a href="http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp/Context.pm">http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp/Context.pm</a><br />we added config and dbh there. after this, you can call $c->config and $c->dbh in controller like<br /><a href="http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp/Notes.pm">http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp/Notes.pm</a><br />it's very flexible. you can add DBIx::Class there, it's not a problem.<br />2, routines. you don't have any :Global :Regex :Chained in Mojolicous. instead, we defined all those url mapping things in DayDayUp.pm sub start.<br /><a href="http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp.pm">http://fayland.googlecode.com/svn/trunk/CPAN/day_day_up/lib/DayDayUp.pm</a><br />indeed, I like it. :)<br />remember it has an order. so you should put the default at the last of routines like<br /><pre><code>    # route<br />    $r->route('/notes/:id/:action', id => qr/\d+/)<br />      ->to(controller => 'notes', action => 'index');<br />    # Default route<br />    $r->route('/:controller/:action')<br />      ->to(controller => 'index', action => 'index');</code></pre><br />set ENV MOJOX_ROUTES_DEBUG on that you can debug the dispatch.<br />(1) / is matching ":/controller/:action" with default controller => 'index', action => 'index'<br />(2) /notes is matching ":/contorller/:action" with controller to be notes and action still be index.<br />(3) /notes/add is matching ":/controller/:action" with controller "notes" and action "add"<br />(4) /notes/1/edit is matching '/notes/:id/:action' with action as edit.<br />much much more you can find it here: <a href="http://search.cpan.org/perldoc?Mojo::Manual::Mojolicious">Mojo::Manual::Mojolicious</a><br />it's simple but powerful.<br /><br />I'll write more next time. but it's for now.<br /><br />Thanks.